<button id="trigger">
  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="logo" viewBox="0 0 18 18">
    <defs>
      <style>
        .cls-1 {
          fill: none;
        }
        .cls-1,
        .cls-2,
        .cls-3,
        .cls-4 {
          stroke-width: 0px;
        }
        .cls-2 {
          fill: url(#linear-gradient);
        }
        .cls-2,
        .cls-3 {
          fill-rule: evenodd;
        }
        .cls-3 {
          fill: url(#linear-gradient-3);
        }
        .cls-4 {
          fill: url(#linear-gradient-2);
        }
      </style>
      <linearGradient id="linear-gradient" x1="12.76" y1="11.97" x2="10.26" y2="1.96" gradientUnits="userSpaceOnUse">
        <stop offset="0" stop-color="#712575" />
        <stop offset=".09" stop-color="#9a2884" />
        <stop offset=".18" stop-color="#bf2c92" />
        <stop offset=".27" stop-color="#da2e9c" />
        <stop offset=".34" stop-color="#eb30a2" />
        <stop offset=".4" stop-color="#f131a5" />
        <stop offset=".5" stop-color="#ec30a3" />
        <stop offset=".61" stop-color="#df2f9e" />
        <stop offset=".72" stop-color="#c92d96" />
        <stop offset=".83" stop-color="#aa2a8a" />
        <stop offset=".95" stop-color="#83267c" />
        <stop offset="1" stop-color="#712575" />
      </linearGradient>
      <linearGradient id="linear-gradient-2" x1="13.71" y1="1.8" x2="13.71" y2="15.92" gradientUnits="userSpaceOnUse">
        <stop offset="0" stop-color="#da7ed0" />
        <stop offset=".08" stop-color="#b17bd5" />
        <stop offset=".19" stop-color="#8778db" />
        <stop offset=".3" stop-color="#6276e1" />
        <stop offset=".41" stop-color="#4574e5" />
        <stop offset=".54" stop-color="#2e72e8" />
        <stop offset=".67" stop-color="#1d71eb" />
        <stop offset=".81" stop-color="#1471ec" />
        <stop offset="1" stop-color="#1171ed" />
      </linearGradient>
      <linearGradient id="linear-gradient-3" x1="12.86" y1="2.12" x2="3.5" y2="17.13" gradientUnits="userSpaceOnUse">
        <stop offset="0" stop-color="#da7ed0" />
        <stop offset=".05" stop-color="#b77bd4" />
        <stop offset=".11" stop-color="#9079da" />
        <stop offset=".18" stop-color="#6e77df" />
        <stop offset=".25" stop-color="#5175e3" />
        <stop offset=".33" stop-color="#3973e7" />
        <stop offset=".42" stop-color="#2772e9" />
        <stop offset=".54" stop-color="#1a71eb" />
        <stop offset=".68" stop-color="#1371ec" />
        <stop offset="1" stop-color="#1171ed" />
      </linearGradient>
    </defs>
    <path class="cls-2" d="m11.52,1.59c.44,0,.83.33.97.81s.96,3.45.96,3.45v5.9h-2.97l.06-10.17h.98Z" />
    <path class="cls-4" d="m15.88,6.2c0-.21-.17-.37-.37-.37h-1.75c-1.23,0-2.23,1-2.23,2.23v3.7h2.12c1.23,0,2.23-1,2.23-2.23v-3.33Z" />
    <path
      class="cls-3"
      d="m11.52,1.59c-.34,0-.61.27-.61.61l-.06,11.23c0,1.64-1.33,2.97-2.97,2.97H2.49c-.26,0-.43-.25-.35-.49L6.46,3.58c.42-1.19,1.54-1.99,2.8-1.99h2.27Z"
    />
    <rect class="cls-1" width="18" height="18" />
  </svg>
</button>
<style>
  :host {
    position: fixed;
    bottom: 10px;
    right: 10px;
    transform: translate(var(--x, 0), var(--y, 0));
    display: block;
    z-index: 1000;
  }

  button#trigger {
    background: none;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 64px;
    width: 64px;
    padding: 0;
    border-radius: 50%;
    background-color: color-mix(in srgb, Canvas, CanvasText 5%);
    border: 1px solid color-mix(in srgb, Canvas, CanvasText 15%);

    &:hover {
      background-color: color-mix(in srgb, Canvas, CanvasText 15%);
      border: 1px solid color-mix(in srgb, Canvas, CanvasText 25%);
    }

    .logo {
      width: 40px;
      height: 40px;
    }
  }

  :host([position="top-left"]) {
    top: 10px;
    left: 10px;
    right: auto;
    bottom: auto;
  }
  :host([position="top-right"]) {
    top: 10px;
    right: 10px;
    bottom: auto;
  }
  :host([position="bottom-left"]) {
    bottom: 10px;
    left: 10px;
    right: auto;
    top: auto;
  }

  dialog {
    font-family:
      system-ui,
      -apple-system,
      BlinkMacSystemFont,
      "Segoe UI",
      Roboto,
      Oxygen,
      Ubuntu,
      Cantarell,
      "Open Sans",
      "Helvetica Neue",
      sans-serif;
    color-scheme: dark;
    width: 24rem;
    border: 1px solid #666;
    border-radius: 8px;
    gap: 1rem;
    padding: 1rem 1rem 2rem 1rem;
  }

  dialog[open] {
    display: grid;
  }

  h1 {
    font-size: 1.5rem;
    margin: 0;
  }

  form {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .field-group {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .button-group {
    padding-top: 0.5rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .test-output {
    &:has(pre:empty) {
      display: none;
    }
    padding-top: 0.5rem;
  }

  pre {
    margin: 0;
    white-space: pre-wrap;
  }

  label {
    font-weight: 500;
    font-size: 0.875rem;
  }

  input {
    width: 100%;
    padding: 0.5rem;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 1rem;
    box-sizing: border-box;
  }

  button {
    padding: 0.5rem 1.5rem;
    background-color: var(--background-color, #006adc);
    color: var(--text-color, white);
    border: 1px solid var(--border-color, transparent);
    border-radius: 4px;
    cursor: pointer;
    align-self: flex-start;

    &:hover {
      color: var(--text-hover-color, white);
      background-color: var(--background-hover-color, #007bff);
      border-color: var(--border-hover-color, transparent);
    }

    --text-color: white;
    --background-color: #006adc;
    --background-hover-color: #1384fd;

    &.subtle {
      --background-color: transparent;
      --text-color: #ccc;
      --text-hover-color: white;
      --border-color: #999;
      --border-hover-color: #ccc;
      --background-hover-color: #666;
    }

    &.danger {
      --background-color: transparent;
      --text-color: #dc3545;
      --border-color: #dc3545;
      --text-hover-color: white;
      --background-hover-color: #c82333;
    }
  }
</style>
<dialog>
  <h1>Azure OpenAI Connection</h1>
  <form id="settings-form" method="dialog">
    <div class="field-group">
      <label for="aoai-endpoint">Azure OpenAI Endpoint</label>
      <input type="url" id="aoai-endpoint" name="aoaiEndpoint" required placeholder="https://example-endpoint.azure.com/" />
    </div>
    <div class="field-group">
      <label for="aoai-deployment">Azure OpenAI Deployment Name</label>
      <input type="text" name="aoaiDeployment" id="aoai-deployment" required placeholder="gpt-4.1-mini" />
    </div>
    <div class="field-group">
      <label for="aoai-api-key">Azure OpenAI API Key</label>
      <input type="password" id="aoai-api-key" name="aoaiApiKey" required />
    </div>
    <div class="test-output">
      <pre id="test-output"></pre>
    </div>
    <div class="button-group">
      <button id="test" class="subtle" type="button">Test</button>
      <button id="done">Done</button>
      <button class="danger" id="delete" type="button">Delete</button>
    </div>
  </form>
</dialog>
